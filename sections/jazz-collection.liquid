{% comment %}
  jazz-band-collection.liquid
  Shopify Section: Jazz Band Collection
  All content editable via Theme Customizer
{% endcomment %}

<section class="jazz-section">
  {% if section.settings.bg_image != blank %}
    <div class="bg-overlay" style="background-image: url({{ section.settings.bg_image | img_url: 'master' }});"></div>
  {% endif %}

  <div class="content-wrapper">
    <div class="main-sub-text">
      <h2 class="main-heading">{{ section.settings.heading | escape }}</h2>
      <p class="sub-heading">{{ section.settings.subheading | escape }}</p>
    </div>

    <!-- ✅ Slider Container -->
    <div class="card-slider">
      <button class="slider-btn prev">&#10094;</button>

      <div class="card-track">
        {% for block in section.blocks %}
          <div class="card {% if block.settings.popular %}popular{% endif %}">
            {% if block.settings.popular %}
              <span class="badge">{{ block.settings.badge_text | escape }}</span>
            {% endif %}

            {% if block.settings.image != blank %}
              <img src="{{ block.settings.image | img_url: 'master' }}" alt="{{ block.settings.title | escape }}" class="card-img" />
            {% endif %}

            <h3 class="card-title">{{ block.settings.title | escape }}</h3>
            <p class="card-desc">{{ block.settings.description }}</p>
            <div class="price">{{ block.settings.price | escape }}</div>

            {% if block.settings.button_url != blank %}
              <a href="{{ block.settings.button_url }}" class="btn {% if block.settings.popular %}highlight{% endif %}">
                {{ block.settings.button_text | escape }}
              </a>
            {% else %}
              <div class="top-btn">
                <span class="btn {% if block.settings.popular %}highlight{% endif %}">
                  {{ block.settings.button_text | escape }}
                </span>
              </div>
            {% endif %}

            <ul class="feature-list">
              {% if block.settings.feature_1 != blank %}<li>{{ block.settings.feature_1 | escape }}</li>{% endif %}
              {% if block.settings.feature_2 != blank %}<li>{{ block.settings.feature_2 | escape }}</li>{% endif %}
              {% if block.settings.feature_3 != blank %}<li>{{ block.settings.feature_3 | escape }}</li>{% endif %}
              {% if block.settings.feature_4 != blank %}<li>{{ block.settings.feature_4 | escape }}</li>{% endif %}
              {% if block.settings.feature_5 != blank %}<li>{{ block.settings.feature_5 | escape }}</li>{% endif %}
            </ul>
          </div>
        {% endfor %}
      </div>

      <button class="slider-btn next">&#10095;</button>
    </div>

    <div class="bottom-btn">
      {% if section.settings.bottom_button_url != blank %}
        <a href="{{ section.settings.bottom_button_url }}" class="btn highlight">
          {{ section.settings.bottom_button_text | escape }}
        </a>
      {% else %}
        <span class="btn highlight">{{ section.settings.bottom_button_text | escape }}</span>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Jazz Band Collection",
  "settings": [
    { "type": "text", "id": "heading", "label": "Section Heading", "default": "Jazz Band Collection" },
    { "type": "text", "id": "subheading", "label": "Section Subheading", "default": "This is red light, reimagined. Choose the perfect device for your wellness journey." },
    { "type": "text", "id": "bottom_button_text", "label": "Bottom Button Text", "default": "Shop All Models" },
    { "type": "url", "id": "bottom_button_url", "label": "Bottom Button Link" },
    { "type": "image_picker", "id": "bg_image", "label": "Background Image" }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Card Image" },
        { "type": "text", "id": "title", "label": "Card Title" },
        { "type": "textarea", "id": "description", "label": "Card Description" },
        { "type": "text", "id": "price", "label": "Card Price" },
        { "type": "text", "id": "button_text", "label": "Button Text", "default": "Shop Now" },
        { "type": "url", "id": "button_url", "label": "Button Link" },
        { "type": "checkbox", "id": "popular", "label": "Mark as Popular", "default": false },
        { "type": "text", "id": "badge_text", "label": "Popular Badge Text", "default": "Most Popular" },
        { "type": "text", "id": "feature_1", "label": "Feature 1" },
        { "type": "text", "id": "feature_2", "label": "Feature 2" },
        { "type": "text", "id": "feature_3", "label": "Feature 3" },
        { "type": "text", "id": "feature_4", "label": "Feature 4" },
        { "type": "text", "id": "feature_5", "label": "Feature 5" }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Jazz Band Collection",
      "category": "Custom Sections",
      "blocks": [
        { "type": "card" },
        { "type": "card", "settings": { "popular": true } },
        { "type": "card" },
        { "type": "card" }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
.jazz-section {
  position: relative;
  text-align: center;
  padding: 90px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;
}

.jazz-section .bg-overlay {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  background-size: cover;
  background-position: center;
  opacity: 0.2;
  z-index: 0;
}

.jazz-section .content-wrapper {
  position: relative;
  width: 100%;
  max-width: 1440px;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.main-heading { color: #0E0F11; margin-bottom: 16px; }
.sub-heading { color: #0A0A0A; font-size: 20px; line-height: 28px; margin-bottom: 60px; }

/* ✅ Slider styling */
.card-slider {
  position: relative;
  overflow: hidden;
  width: 100%;
  padding: 40px 0;
}

.card-track {
  display: flex;
  transition: transform 0.6s ease;
  gap: 30px;
}

.card {
  min-width: 360px;
  flex-shrink: 0;
  background-color: #111;
  color: #fff;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  text-align: left;
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-10px) scale(1.03);
  box-shadow: 0 12px 30px rgba(0,0,0,0.4);
}

/* Nav buttons */
.slider-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.5);
  color: #fff;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 50%;
  z-index: 3;
  transition: 0.3s;
}

.slider-btn:hover { background: #ec0d87; }

.slider-btn.prev { left: 10px; }
.slider-btn.next { right: 10px; }

.bottom-btn {
  display: flex;
  justify-content: center;
  margin-top: 90px;
}

/* Responsive */
@media (max-width: 1024px) {
  .card { min-width: 320px; }
}
@media (max-width: 768px) {
  .card { min-width: 280px; }
}
{% endstylesheet %}

{% javascript %}
document.addEventListener("DOMContentLoaded", function() {
  const track = document.querySelector(".card-track");
  const cards = document.querySelectorAll(".card");
  const nextBtn = document.querySelector(".slider-btn.next");
  const prevBtn = document.querySelector(".slider-btn.prev");

  if (!track || !cards.length) return;

  let index = 0;
  const visibleCards = 3;
  const cardWidth = cards[0].offsetWidth + 30; // width + gap

  function updateSlide() {
    track.style.transform = `translateX(-${index * cardWidth}px)`;
  }

  nextBtn.addEventListener("click", () => {
    if (index < cards.length - visibleCards) index++;
    else index = 0;
    updateSlide();
  });

  prevBtn.addEventListener("click", () => {
    if (index > 0) index--;
    else index = cards.length - visibleCards;
    updateSlide();
  });

  setInterval(() => {
    if (index < cards.length - visibleCards) index++;
    else index = 0;
    updateSlide();
  }, 3000);
});
{% endjavascript %}
